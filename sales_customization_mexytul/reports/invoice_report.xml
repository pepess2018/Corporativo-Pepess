<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="report_invoice_mexytul" inherit_id="l10n_mx_edi.report_invoice_document_mx">
        <p t-if="o.invoice_payment_term_id" position="replace"/>

        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin" name="origin" position="after">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_payment_term_id">
                <strong>PLAZO DE PAGO:</strong>
                <p class="m-0" t-field="o.invoice_payment_term_id"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.user_id">
                <strong>VENDEDOR:</strong>
                <p class="m-0" t-field="o.user_id"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.l10n_mx_edi_usage">
                <strong>USO CFDI:</strong>
                <p class="m-0" t-field="o.partner_id.l10n_mx_edi_usage"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.route">
                <strong>Ruta:</strong>
                <p class="m-0" t-field="o.partner_id.route"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" name="tipodecomprobante" t-if="xml and xml.get('TipoDeComprobante')">
                <strong>Tipo De Comprobante:</strong>
                <p class="m-0" t-esc="xml.get('TipoDeComprobante')"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.payment_method">
                <strong>Forma De Pago</strong>
                <p class="m-0" t-field="o.payment_method"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" name="moneda" t-if="xml and xml.get('Moneda')">
                <strong>Moneda:</strong>
                <p class="m-0" t-esc="xml.get('Moneda')"/>
            </div>
        </div>

        <div name="cfdi_vals['usage']" position="before">
            <t t-if="o.l10n_mx_edi_cfdi_uuid">
                <div class="col-auto col-3 mw-100 mb-2" t-if="xml.get('NumCtaPago')">
                    <strong>Bank Account:</strong>
                    <p class="m-0" t-esc="xml.get('NumCtaPago')"/>
                </div>
            </t>
        </div>

        <xpath expr="//table[@name='invoice_line_table']//th[@t-if='display_discount']" position="after">
            <th class="text-right">Importe impuestos</th>
        </xpath>
        <xpath expr="//tbody[hasclass('invoice_tbody')]//td[@t-if='display_discount']" position="after">
            <td class="text-right">
                <span t-field="line.tax_amount"/>
            </td>
        </xpath>

        <p t-if="o.fiscal_position_id.note" position="after">
            <div class="col-12 mt8 small" style="page-break-inside: avoid;text-transform: uppercase;border: 2px solid;">

                <p class="mt8">
                    DEBO Y PAGARE INCONDICIONALMENTE A LA ORDEN DE CORPORATIVO PEPE SS S.A. DE C.V.  EN ESTA CIUDAD DE TULANCINGO HGO. 
                    EL DÍA<span class="ml4 mr4" style="border-bottom: 1px solid;border-width: 0.01em;" t-field="o.invoice_date_due"/>, LA CANTIDAD DE: <span class="ml4 mr4" style="border-bottom: 1px solid;" t-field="o.amount_total"/>

                    <span class="ml4 mr4" style="border-bottom: 1px solid;" t-esc="o._l10n_mx_edi_cfdi_amount_to_text()"/>
                    VALOR DE ESTA MERCANCÍA QUE HE RECIBIDO A MI ENTERA SATISFACCIÓN, ESTE PAGARE ES MERCANTIL Y ESTA REGIDO POR LA LEY 
                    GENERAL DE TÍTULOS Y OPERACIONES DE CRÉDITO EN SU ARTICULO 173 PARTE FINAL Y ARTÍCULOS CORRELATIVOS POR NO SER 
                    PAGARE DOMICILIADO. 
                    EL HECHO DE NO SER CUBIERTO A SU VENCIMIENTO CARGAREMOS DESDE LA FECHA DE VENCIMIENTO UN INTERÉS DEL _______% MENSUAL POR TODO EL TIEMPO QUE ESTUVIERE INSOLUTO.</p>
                    <div class="col-7"/>
                    <div class="col-5">
                        <div class="mt16 text-center" style="border-bottom: 1px solid; width: 100%;"></div>
                        <div class="text-center">FIRMA DE CONFORMIDAD</div>
                    </div>
            </div>
        </p>
        <xpath expr="//*[@id='total']//table/tr[last()]" position="after">
            <tr class="border-black">
                <td class="text-right" colspan="2">
                    <p>
                        <span t-esc="o._l10n_mx_edi_cfdi_amount_to_text()"/>
                    </p>
                </td>
            </tr>
        </xpath>
        <div id="total" position="inside">
            <div class="col-6">
                <table class="table table-bordered small">
                    <tr>
                        <td class="text-center">
                            <strong>NUMERO TOTAL DE PRODUCTOS:</strong>
                            <p t-field="o.total_products"/>
                        </td>
                        <td class="text-center">
                            <strong>SALDO TOTAL:</strong>
                            <p t-field="o.total_due"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-center">
                            <strong>NUMERO TOTAL DE PARTIDAS:</strong>
                            <p t-field="o.total_lines"/>
                        </td>
                        <td class="text-center">
                            <strong>SALDO VENCIDO:</strong>
                            <p t-field="o.balance_expiration"/>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

    </template>

    <template inherit_id="sale.report_invoice_document_inherit_sale" id="report_invoice_document_inherit_sale_mexytul">
        <xpath expr="//t[@t-if='o.partner_shipping_id and (o.partner_shipping_id != o.partner_id)']" position="before">
            <div t-if="o.warehouse_address_id">
                <strong>LUGAR DE EXPEDICION:</strong>
                <div t-field="o.warehouse_address_id"
                    t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
            </div>
        </xpath>

    </template>
</odoo>